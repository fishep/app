FROM openjdk:18-jdk-alpine

ARG PROJECT_ARTIFACTID=permission-server
ARG PROJECT_VERSION=1.0-SNAPSHOT
ARG PROJECT_BUILD_FINALNAME=${PROJECT_ARTIFACTID}-${PROJECT_VERSION}.jar

ARG APP_PATH=./target/
ARG APP_FILE=$PROJECT_BUILD_FINALNAME

ARG JAR_PATH=/app/${PROJECT_ARTIFACTID}/
ENV JAR_FILE=$APP_FILE

ENV JAVA_OPTS=""

RUN mkdir -p $JAR_PATH
COPY $APP_PATH$APP_FILE $JAR_PATH$JAR_FILE
WORKDIR $JAR_PATH

EXPOSE 9030
ENTRYPOINT exec java $JAVA_OPTS -jar $JAR_FILE
