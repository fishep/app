FROM openjdk:18-jdk-alpine

ARG PROJECT_ARTIFACTID=oms-server
ARG PROJECT_VERSION=1.0-SNAPSHOT
ARG PROJECT_BUILD_FINALNAME=${PROJECT_ARTIFACTID}-${PROJECT_VERSION}.jar

ARG APP_FILE=./target/$PROJECT_BUILD_FINALNAME
ARG APP_ROOT=/app/${PROJECT_ARTIFACTID}

ENV JAVA_OPTS=""
ENV JAR_FILE=${PROJECT_BUILD_FINALNAME}

RUN mkdir -p $APP_ROOT
COPY $APP_FILE $APP_ROOT
WORKDIR $APP_ROOT

EXPOSE 9070
ENTRYPOINT exec java $JAVA_OPTS -jar $JAR_FILE
